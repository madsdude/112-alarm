<div
  id="status-panel"
  class="card status-card"
  hx-get="/partials/status"
  hx-trigger="load, every 6s, refresh-status from:body"
  hx-swap="outerHTML"
>
  <h2 class="section-title">Driftsstatus</h2>
  <dl class="status-grid">
    <div>
      <dt>Økonomi</dt>
      <dd>{{ (gamestate.funds if gamestate else 0)|int }} kr</dd>
    </div>
    <div>
      <dt>XP</dt>
      <dd>{{ (gamestate.xp if gamestate else 0)|int }}</dd>
    </div>
    <div>
      <dt>Succesrate</dt>
      {% set resolved = gamestate.incidents_resolved if gamestate else 0 %}
      {% set failed = gamestate.incidents_failed if gamestate else 0 %}
      {% set total = resolved + failed %}
      {% if total > 0 %}
        <dd>{{ ((resolved / total) * 100)|round(1) }}%</dd>
      {% else %}
        <dd>–</dd>
      {% endif %}
    </div>
    <div>
      <dt>Aktive hændelser</dt>
      <dd>{{ active_incidents|length }}</dd>
    </div>
  </dl>
</div>
